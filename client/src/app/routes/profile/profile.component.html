<div class="container-fluid" style="position: relative;">
  <div class="row no-gutters mt-4">
    <div class="col col-6 d-flex">
      <h2 class="mb-3 text-primary fw-700">{{ currentUser.firstName + ' ' + currentUser.lastName }}</h2>
    </div>
  </div>
  <div class="my-box d-flex justify-content-center">
    <div class="spinner-border text-primary" role="status" id="spinner"
      style="width: 3rem; height: 3rem; z-index: 9999;">
      <span class="sr-only">Loading...</span>
    </div>
  </div>
  <div class="row mb-3" style="height: 80%;">
    <div class="col col-4">
      <img src="{{user.photoUrl}}" alt="{{user.email}}" class="avatar">
    </div>
    <div class="col col-8">
      <form [formGroup]="profileForm">
      <mat-tab-group
        dynamicHeight
        headerPosition="above"
      >
        <mat-tab label="Profile">
          <mat-card>
            <mat-card-content>
              <div class="row no-gutters">
                <div class="col col-10">
                  <div class="example-container">
                    <div class="row" style="padding: 0px 20px;">
                      <div *ngFor="let photo of currentUser.photos" class="mr-2">
                        <img src="{{photo.url}}" alt="{{photo.id}}" style="height: 120px">
                        <div class="mt-2">
                          <button [disabled]="photo.isMain" (click)="setMainPhoto(photo)"
                            [ngClass]='photo.isMain ? "btn-success active" : "btn-outline-success"' class="btn btn-sm mb-2">
                            Main</button>
                          <button [disabled]="photo.isMain" (click)="deletePhoto(photo)" class="btn btn-sm btn-danger float-right">
                            <i class="fa fa-trash mr-2"></i></button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col col-2">
                  <div ng2FileDrop [ngClass]="{'nv-file-over': hasBaseDropZoneOver}" (fileOver)="fileOverBase($event)"
                    [uploader]="uploader" class="float-right card p-2 text-center mb-3 mr-4 my-drop-zone">
                    <i class="fa fa-upload fa-3x mr-2"></i>
                    Add photos here
                  </div>
                  <input type="file" ng2FileSelect [uploader]="uploader" multiple/><br />
                </div>
              </div>
              <div class="row mt-2">
                <div class="col col-6">
                  <div class="form-group row">
                    <h6 class="col col-3" style="margin-top: 12px;">Name</h6>
                    <div class="col-9">
                      <mat-form-field class="w-100">
                        <input
                          matInput
                          placeholder="Name"
                          disabled
                          value="{{currentUser.firstName}} {{currentUser.lastName}}"
                        />
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="form-group row">
                    <h6 class="col col-3" style="margin-top: 12px;">Permission</h6>
                    <div class="col-9">
                      <mat-form-field class="w-100">
                        <mat-select placeholder="Permission" formControlName="permissionCode">
                          <mat-option *ngFor="let code of permission" [value]="code.value">
                              {{ code.viewValue }}
                          </mat-option>
                      </mat-select>
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="form-group row">
                    <h6 class="col col-3" style="margin-top: 12px;">Department</h6>
                    <div class="col-9">
                      <mat-form-field class="w-100">
                        <mat-select placeholder="Department" formControlName="departmentId">
                          <mat-option *ngFor="let department of departments" [value]="department.id">
                              {{ department.departmentName }}
                          </mat-option>
                      </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                </div>

                <div class="col col-6">
                  <div class="form-group row">
                    <h6 class="col col-3" style="margin-top: 12px;">Email</h6>
                    <div class="col-9">
                      <mat-form-field class="w-100">
                        <input
                          matInput
                          placeholder="Email"
                          formControlName="email"
                        />
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="form-group row">
                    <h6 class="col col-3" style="margin-top: 12px;">Phone</h6>
                    <div class="col-9">
                      <mat-form-field class="w-100">
                        <input
                          matInput
                          placeholder="Phone"
                          formControlName="phone"
                        />
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="form-group row">
                    <h6 class="col col-3" style="margin-top: 12px;">Address</h6>
                    <div class="col-9">
                      <mat-form-field class="w-100">
                        <input
                          matInput
                          placeholder="Address"
                          formControlName="address"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>

              <div class="w-100">
                <button
                  *ngIf="!isEdit"
                  type="button"
                  class="btn mr-2 btn-info float-right"
                  (click)="onChangeEdit(true)"
                >
                  <i class="fa fa-edit mr-2"></i>
                  Edit
                </button>
                <button
                  *ngIf="isEdit"
                  [busyText]="'Loading...'"
                  [buttonBusy]="isLoading"
                  type="button"
                  class="btn ml-2 btn-primary float-right"
                  (click)="onSubmit()"
                >
                  <i class="fa fa-save mr-2"></i>
                  Save changes
                </button>
                <button
                  *ngIf="isEdit"
                  type="button"
                  class="btn btn-secondary float-right"
                  (click)="onChangeEdit(false)"
                >
                  <i class="fa fa-undo mr-2"></i>
                  Cancel
                </button>
              </div>

            </mat-card-content>
          </mat-card>
        </mat-tab>
        <mat-tab label="ChangePassword">
          <mat-card>
            <mat-card-content style="height: 430px">
              <form [formGroup]="changePasswordForm">
                <div class="form-group row">
                  <h6 class="col col-2" style="margin-top: 12px;">Email</h6>
                  <div class="col-10">
                    <mat-form-field class="w-100">
                      <input
                        matInput
                        placeholder="Email"
                        formControlName="email"
                      />
                    </mat-form-field>
                  </div>
                </div>

                <div class="form-group row">
                  <h6 class="col col-2" style="margin-top: 12px;">Password</h6>
                  <div class="col-10">
                    <mat-form-field class="w-100">
                      <input
                        matInput
                        type="password"
                        placeholder="Password"
                        formControlName="password"
                      />
                    </mat-form-field>
                  </div>
                </div>

                <div class="form-group row">
                  <h6 class="col col-2" style="margin-top: 12px;">New Password</h6>
                  <div class="col-10">
                    <mat-form-field class="w-100">
                      <input
                        matInput
                        type="password"
                        placeholder="New Password"
                        formControlName="newPassword"
                      />
                    </mat-form-field>
                  </div>
                </div>

                <div class="form-group row">
                  <h6 class="col col-2" style="margin-top: 12px;">Confirm Password</h6>
                  <div class="col-10">
                    <mat-form-field class="w-100">
                      <input
                        matInput
                        type="password"
                        placeholder="Confirm Password"
                        formControlName="passwordConfirm"
                      />
                    </mat-form-field>
                  </div>
                </div>
              </form>

              <div class="w-100">
                <button
                  [busyText]="'Loading...'"
                  [buttonBusy]="isLoading"
                  type="button"
                  class="btn ml-2 btn-primary float-right"
                  (click)="checkPassword()"
                >
                  <i class="fa fa-save mr-2"></i>
                  Save changes
                </button>
              </div>
            </mat-card-content>
          </mat-card>
        </mat-tab>
      </mat-tab-group>
    </form>
    </div>
  </div>
  <!-- <div class="col col-12" style="background-color:rgb(70, 55, 124)">
    <i class="fa fa-chrome mr-2"></i>
    <i class="fa fa-facebook-square mr-2"></i>
    <i class="fa fa-instagram mr-2"></i>
    <i class="fa fa-globe mr-2"></i>
  </div> -->
</div>