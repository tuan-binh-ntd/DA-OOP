<div class="container-fluid">
  <div class="row mt-4">
    <div class="col col-6">
      <h2>Projects</h2>
    </div>
    <div class="col col-6">
      <button
        class="button-create float-right"
        data-toggle="modal"
        data-target="#createProjectModal"
        (click)="modalProject.openModal(null, 'create')"
      >
        Create Project
      </button>
    </div>
  </div>

  <div class="row">
    <div class="col col-6">
      <div class="form-group has-search">
        <span class="fa fa-search form-control-feedback"></span>
        <input type="text" class="form-control" placeholder="Search" />
      </div>
      <div class="mb-3">
        <button class="btn ml-2" [ngClass]="{ 'btn-primary': isAllRecord }">
          All: {{ allRecord }}
        </button>
        <button
          class="btn ml-2"
          [ngClass]="{ 'btn-primary': isResolvedRecord }"
        >
          InProgress: {{ resolvedRecord }}
        </button>
        <button
          class="btn ml-2"
          [ngClass]="{ 'btn-primary': isInProgressRecord }"
        >
          Resolved: {{ inProgressRecord }}
        </button>
        <button class="btn ml-2" [ngClass]="{ 'btn-primary': isClosedRecord }">
          Closed: {{ closedRecord }}
        </button>
      </div>
    </div>
  </div>

  <div class="card-columns">
    <div class="card  bg-light" *ngFor="let item of data" style="display: inline-block">
      <div class="card-body" (click)="onViewTask(item.id)">
        <div class="row">
          <div class="col col-6" style="line-height: 16px">
            <span class="font-weight-light" style="line-height: 32px">
              {{ item.taskCount }} Tasks
            </span>
          </div>
          <div class="col col-6">
            <app-priority-icon
              class="float-right"
              [priorityCode]="item.priorityCode"
            ></app-priority-icon>
          </div>
        </div>
        <h5 class="card-title">{{ item.projectName }}</h5>
        <!-- <p class="card-text">{{ item.description }}</p> -->
        <div class="row">
          <div class="col col-6">
            <p class="card-text">
              <i class="fa fa-thumb-tack mr-2" aria-hidden="true"></i>
              {{ getDepartmentName(item.departmentId) }}
            </p>
            <p *ngIf="item.completeDate; else notComplete" class="card-text text-success">
              <i class="fa fa-check-square mr-2" aria-hidden="true"></i>
              {{ item.completeDate | date: "dd/MM/yyyy" }}
            </p>
            <ng-template #notComplete>
              <ng-container *ngIf="item.dayLefts.days >0; else overtime" class="card-text">
                <i class="fa fa-clock-o mr-2" aria-hidden="true"></i>
                {{ item.dayLefts.days }} Days
              </ng-container>
            </ng-template>
            <ng-template #overtime>
              <p *ngIf="item.dayLefts.days <= 0" class="card-text text-danger">
               <i class="fa fa-times-circle mr-2" aria-hidden="true">
              </i>
             <span> Overtime</span>
              </p>
            </ng-template>
            
          </div>
          <div class="col col-6"></div>
        </div>

        <hr />
        <div class="row text-center">
          <div class="col col-6">
            <h6>Leader</h6>
            <span>{{item.leaderName}}</span>
          </div>
          <div class="col col-6">
            <button class="button-create float-right" (click)="openDetailModal(item, 'detail')">Update</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div
    class="modal fade"
    id="createProjectModal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg " role="document">
    <app-modal-project #modalProject [departments]="departments"></app-modal-project>
    </div>
  </div>
</div>
