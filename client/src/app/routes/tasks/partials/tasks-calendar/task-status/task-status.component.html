<div class="container-fluid" style="position: relative;">
  <div class="row no-gutters mt-4">
 
    <div class="col col-10">
      <h2 class="mb-3 text-primary fw-700">Task Status </h2>
    </div>

    <div class="col col-1">
      <div *ngIf="projectId" class="navbar-nav dropdown col-md-auto">
        <button class="button dropdown-toggle" data-toggle="dropdown2" aria-haspopup="true" aria-expanded="false"
          id="navbarDropdown2" data-target="target2">
          <i class="fa fa-sliders"></i>
          <span class="mr-2">View</span>
        </button>
        <div #target2 class="dropdown-menu navbar-dropdown" aria-labelledby="navbarDropdown2">
          <a class="dropdown-item" (click)="onViewTask('list')">
            <i class="fa fa-list-alt mr-2"></i>
            List</a>

          <a class="dropdown-item" (click)="onViewTask('calendar')">
            <i class="fa fa-calendar mr-2"></i>
            Calendar</a>

          <a class="dropdown-item" (click)="onViewTask('status')">
            <i class="fa fa-calendar mr-2"></i>
            Status</a>
        </div>
      </div>
    </div>
    <div class="col col-1">
      <button *ngIf="right" class="button float-right p-0" (click)="onFilterUser(); this.isMyTask = !isMyTask">
        <i class="fa fa-calendar mr-2"></i>
        <span>{{ filterUserTask }}</span>
      </button>
    </div>
    <div class="col col-10">
          <app-task-filter (onSubmitForm)="submitFormFilter($event)" (resetFilter)="onResetFilter()"
            (filterPriority)="onFilterPriority($event)" (filterStatus)="onFilterStatus($event)"
            (filterType)="onFilterType($event)" (onSearchTask)="onSearch($event)"></app-task-filter>
      <button *ngIf="right" class="btn--fab fixedButton color-1 float-right" data-toggle="modal"
        data-target="#createTaskModal" (click)="modalTask.openModal(null, 'create', true);this.isShowModal = true">
        <i class="fa fa-plus"></i>
      </button>

<!-- <div class="example-container">
  <button *ngIf="this.isMyTask == true" class="button float-right" (click)="onFilterUser(); this.isMyTask = false">
    <i class="fa fa-calendar mr-2"></i>
    <span>Assign</span>
  </button>
  <button *ngIf="this.isMyTask == false" class="button float-right" (click)="onFilterUser(); this.isMyTask = true">
    <i class="fa fa-calendar mr-2"></i>
    <span>My Task</span>
  </button>
    <h2>Open</h2>
    <div
      cdkDropList
      #listProgress="cdkDropList"
      [cdkDropListData]="openTasks"
      [cdkDropListConnectedTo]="[listOpen,listResolve, listProgress]"
      class="example-list"
      (cdkDropListDropped)="drop($event)">
      <div class="example-box" *ngFor="let item of openTasks" cdkDrag [cdkDragDisabled]="isLoading">{{item.taskName}}</div> -->
    </div>
  </div>
  <div class="my-box d-flex justify-content-center">
    <div class="spinner-border text-primary" role="status" id="spinner"  style="width: 3rem; height: 3rem; z-index: 9999;">
        <span class="sr-only">Loading...</span>
    </div>
</div>
<div class="row ml-0 mr-0">

  <div class="col col-3">

    <div class="example-container">
      <div class="d-flex mb-3" style="height:40px">
        <h6 class="mr-2 fw-700 list-wrap1" style="line-height:40px; letter-spacing: 2px;">REOPEN</h6>
        <div class="countTask">{{reOpendCount}}</div>
        </div>
        <div
          cdkDropList
          id="reopen"
          cdkDropListSortingDisabled
          #listReopen="cdkDropList"
          [cdkDropListAutoScrollDisabled]="false"
          [cdkDropListData]="reOpenTask"
          [cdkDropListConnectedTo]="[listReopen,listOpen,listResolve, listProgress]"
          class="example-list"
          (cdkDropListDropped)="drop($event)">
          <div class="example-box" *ngFor="let item of reOpenTask" cdkDrag [cdkDragDisabled]="isLoading">
            <div class="w-100">
              <div>
                <span>{{item.taskName}}</span>
                <app-priority-icon class="float-right" [priorityCode]="item.priorityCode"></app-priority-icon>
              </div>
              <span>{{item.taskCode}}</span>
            </div>

            </div>
        </div>
      </div>
    </div>

    <div class="col col-3">

  <div class="example-container">
    <div class="d-flex mb-3" style="height:40px">
      <h6 class="mr-2 fw-700 list-wrap2" style="line-height:40px; letter-spacing: 2px;">OPEN</h6>
      <div class="countTask">{{openCount}}</div>
      </div>
      <div
        cdkDropList
        id="open"
        #listOpen="cdkDropList"
        cdkDropListSortingDisabled
        [cdkDropListAutoScrollDisabled]="false"
        [cdkDropListData]="openTasks"
        [cdkDropListConnectedTo]="[listReopen,listOpen,listResolve, listProgress]"
        class="example-list"
        (cdkDropListDropped)="drop($event)">
        <div class="example-box" *ngFor="let item of openTasks" cdkDrag [cdkDragDisabled]="isLoading">
          <div class="w-100">
            <div>
              <span>{{item.taskName}}</span>
              <app-priority-icon class="float-right" [priorityCode]="item.priorityCode"></app-priority-icon>
            </div>
            <span>{{item.taskCode}}</span>
          </div>
        </div>
      </div>
    </div>
    </div>
    <div class="col col-3">

    <div class="example-container">
      <div class="d-flex mb-3" style="height:40px">
        <h6 class="mr-2 fw-700 list-wrap3" style="line-height:40px; letter-spacing: 2px;">INPROGRESS</h6>
        <span class="countTask">{{inProgressCount}}</span>
      </div>
      <div
        cdkDropList
        id="inProgress"
        cdkDropListSortingDisabled
        #listProgress="cdkDropList"
        [cdkDropListData]="inProgressTask"
        [cdkDropListAutoScrollDisabled]="false"
        [cdkDropListConnectedTo]="[listReopen,listOpen,listResolve, listProgress]"
        class="example-list"
        (cdkDropListDropped)="drop($event)">
        <div class="example-box" *ngFor="let item of inProgressTask" cdkDrag [cdkDragDisabled]="isLoading">
          <div class="w-100">
            <div>
              <span>{{item.taskName}}</span>
              <app-priority-icon class="float-right" [priorityCode]="item.priorityCode"></app-priority-icon>
            </div>
            <span>{{item.taskCode}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col col-3">

    <div class="example-container">
      <div class="d-flex mb-3" style="height:40px">
      <h6 class="mr-2 fw-700 list-wrap4" style="line-height:40px; letter-spacing: 2px;">COMPLETED</h6>
      <span class="countTask">{{resolvedCount}}</span>
      </div>
      <div
        cdkDropList
        id="resolved"
        cdkDropListSortingDisabled
        [cdkDropListAutoScrollDisabled]="false"
        #listResolve="cdkDropList"
        [cdkDropListData]="resolvedTask"
        [cdkDropListConnectedTo]="[listOpen,listResolve, listProgress]"
        class="example-list"
        (cdkDropListDropped)="drop($event)">
        <div class="example-box" *ngFor="let item of resolvedTask" cdkDrag [cdkDragDisabled]="isLoading">
          <div class="w-100">
            <div>
              <span>{{item.taskName}}</span>
              <app-priority-icon class="float-right" [priorityCode]="item.priorityCode"></app-priority-icon>
            </div>
            <span>{{item.taskCode}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</div>

<div class="modal fade" id="createTaskModal" [hidden]="!isShowModal" tabindex="-1" role="dialog"
aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog modal-xl" role="document">
  <app-modal-task #modalTask [projects]="projects" (onChangeTask)="onChangeTask()"></app-modal-task>
</div>
</div>
