<div class="modal-content">
    <div class="modal-header">
        <h5 class="modal-title" id="createTaskModal">{{title}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="modalForm">
            <div class="form-group row">
                <label class="form-label col-2" for="name">Task Name</label>
                <div class="col-10">
                    <mat-form-field class="w-100">
                        <input matInput placeholder="Enter task name" formControlName="taskName" />
                    </mat-form-field>
                </div>
            </div>

            <div class="form-group row">
                <label class="form-label col-2">Type</label>
                <div class="col-10">
                    <mat-form-field class="w-100">
                        <mat-select placeholder="Enter task type" formControlName="taskType">
                            <mat-option *ngFor="let type of taskTypes" [value]="type.value">
                                {{ type.viewValue }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>

            <div class="form-group row">
                <label class="form-label col-2">Project</label>
                <div class="col-10">
                    <mat-form-field class="w-100">
                        <mat-select placeholder="Enter project name" formControlName="projectId"
                            (ngModelChange)="onChangeProject()">
                            <mat-option *ngFor="let project of projects" [value]="project.id">
                                {{ project.projectName }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>

            <div class="form-group row">
                <label class="form-label col-2" for="name">Leader</label>
                <div class="col-10">
                    <mat-form-field class="w-100">
                        <mat-select [disabled]="true" placeholder="Enter task leader" formControlName="createUserId">
                            <mat-option *ngFor="let user of users" [value]="user.id">
                                {{ user.firstName }} {{user.lastName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>

            <div class="form-group row">
                <label class="form-label col-2" for="name">Employee</label>
                <div class="col-10">
                    <mat-form-field class="w-100">
                        <mat-select placeholder="Enter employee name" formControlName="appUserId">
                            <mat-option *ngFor="let user of users" [value]="user.id">
                                {{ user.firstName }} {{user.lastName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>

            <div class="form-group row">
                <label class="form-label col-2">Priority</label>
                <div class="col-10">
                    <mat-form-field class="w-100">
                        <mat-select placeholder="Enter task priority" formControlName="priorityCode">
                            <mat-option *ngFor="let code of priorityCode" [value]="code.value">
                                {{ code.viewValue }}
                            </mat-option>
                        </mat-select>

                    </mat-form-field>
                </div>
            </div>

            <div class="form-group row">
                <label class="form-label col-2" for="name">Create</label>
                <div class="col-10">
                    <mat-form-field class="w-100">
                        <mat-label>Choose a date</mat-label>
                        <input matInput [disabled]="true" [matDatepicker]="create" formControlName="createDate" />
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="create">
                        </mat-datepicker-toggle>
                        <mat-datepicker #create></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>

            <div class="form-group row">
                <label class="form-label col-2" for="name">Deadline</label>
                <div class="col-10">
                    <mat-form-field class="w-100">
                        <mat-label>Choose a date</mat-label>
                        <input matInput [matDatepicker]="deadline" formControlName="deadlineDate" />
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="deadline">
                        </mat-datepicker-toggle>
                        <mat-datepicker #deadline></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>

            <div [hidden]="mode === 'create'" class="form-group row">
                <label class="form-label col-2" for="name">Complete</label>
                <div class="col-10">
                    <mat-form-field class="w-100">
                        <mat-label>Choose a date</mat-label>
                        <input matInput [matDatepicker]="complete" formControlName="completeDate" />
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="complete">
                        </mat-datepicker-toggle>
                        <mat-datepicker #complete></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>

            <div class="form-group row">
                <label class="form-label col-2" for="name">Description</label>
                <div class="col-10">
                    <mat-form-field class="w-100">
                        <input matInput placeholder="Enter description..." formControlName="description" />
                    </mat-form-field>
                </div>
            </div>

            <style>
                ::ng-deep .cdk-overlay-container {
                    z-index: 2000;
                }
            </style>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
            Close
        </button>
        <button type="button" class="btn btn-primary" (click)="submitForm()">Save changes</button>
    </div>
</div>